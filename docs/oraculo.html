<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Or√°culo-Mestre - Instituto √Åguas Primordiais</title>
<style>
body { font-family: Arial, sans-serif; background: #f0f5f7; margin: 0; padding: 0; }
#chat-container { max-width: 800px; margin: auto; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.message { margin: 10px 0; }
.user { color: #005f73; font-weight: bold; }
.bot { color: #9b2226; font-style: italic; }
input, button { padding: 10px; font-size: 1em; }
#input-area { display: flex; gap: 10px; }
#respostas { max-height: 400px; overflow-y: auto; border-top: 1px solid #ccc; padding-top: 10px; }
.hidden { display: none; }
</style>
</head>
<body>

<div id="chat-container">
    <h1>üîÆ Or√°culo-Mestre</h1>

    <div id="formulario">
        <p>Preencha seus dados para uma consulta personalizada:</p>
        <input type="text" id="nome" placeholder="Nome completo"><br><br>
        <input type="text" id="local_nascimento" placeholder="Local de nascimento"><br><br>
        <input type="text" id="local_atual" placeholder="Local atual"><br><br>
        <input type="date" id="data_nascimento"><br><br>
        <input type="time" id="hora_nascimento"><br><br>
        <button onclick="iniciarConsulta()">Iniciar Consulta</button>
    </div>

    <div id="chat" class="hidden">
        <div id="respostas"></div>
        <div id="input-area">
            <input type="text" id="pergunta" placeholder="Fa√ßa sua pergunta ao Or√°culo..." style="flex:1;">
            <button onclick="enviarPergunta()">Perguntar</button>
        </div>
    </div>
</div>

<script>
function iniciarConsulta() {
    const dados = {
        nome: document.getElementById('nome').value,
        local_nascimento: document.getElementById('local_nascimento').value,
        local_atual: document.getElementById('local_atual').value,
        data_nascimento: document.getElementById('data_nascimento').value,
        hora_nascimento: document.getElementById('hora_nascimento').value
    };

    if (!dados.nome || !dados.local_nascimento || !dados.local_atual || !dados.data_nascimento || !dados.hora_nascimento) {
        alert("Por favor, preencha todos os campos.");
        return;
    }

    sessionStorage.setItem("perfil_usuario", JSON.stringify(dados));
    document.getElementById('formulario').classList.add('hidden');
    document.getElementById('chat').classList.remove('hidden');
}

async function enviarPergunta() {
    const pergunta = document.getElementById('pergunta').value;
    if (!pergunta) return;

    document.getElementById('respostas').innerHTML += `<div class="message user">Voc√™: ${pergunta}</div>`;
    document.getElementById('pergunta').value = '';

    const perfil = JSON.parse(sessionStorage.getItem("perfil_usuario"));

    const response = await fetch("https://SEU-LINK-DO-RENDER.onrender.com", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ pergunta, perfil })
    });

    const data = await response.json();
    document.getElementById('respostas').innerHTML += `<div class="message bot">Or√°culo: ${data.resposta}</div>`;
    document.getElementById('respostas').scrollTop = document.getElementById('respostas').scrollHeight;
}
</script>

</body>
</html>